int main() 
{
  HANDLE hRead;
  DWORD dwWritten;

  /* prerequisite setup coniditions for pipe to work 
  
    inject dll into process of choosing - I would choose a core windows process as this will be 
    available on almost all systems - just be careful which process you choose as some won't 
    allow injection

    injection via loadlib or manualmap (ideally manual map)

    pseudo code 

    if(!mamap(dll))
    {
      // or try different method of dll injection / different process
      return 0;
    }

    // now proceed to pipe communication / main execution flow
  */
  
  /* pipe coniditions can just be read / write depending on params set */
  hRead = CreateFile(TEXT("\\\\.\\pipe\\pipe_name"),
					GENERIC_READ | GENERIC_WRITE,
					0,
					NULL,
					OPEN_EXISTING,
					0,
					NULL);

  /* only for testing this message sent to the pipe will be the file location on disk */
  char* message = "test message for pipe";
  WriteFile(hRead,
    message,
    strlen(message), 
    &dwWritten,
    NULL);
  
  CloseHandle(hRead);

/* after this call make sure process is terminated or add this functionality to the pipe hanlder */
	
  return 0;
}
